title: 谈谈MySQL的索引
date: 2019-07-13
tags: ['MySQL', '数据结构']
----

# 学会用索引

## B-Tree
最常用的索引时B-Tree，实际实现时是用B+Tree

索引的有点：
1 大大减少服务器需要扫描的数据量
2 可以帮助避免排序和临时表
3. 可以将随机IO变成顺序IO


## 聚簇索引

并不是单独的一种索引，而是一种数据存储方式。具体细节依赖于某种实现方式，但InnoDB的聚蔟是在同一个结构中保存了B-Tree索引和数据行。

聚蔟表示数据行和相邻的键值紧凑地存储在一起。因为无法把数据放在两个地方，所以一个表只能有一个聚蔟索引。 

优点：
1. 可以把相关的关系数据存在一起。例如实现电子邮箱，可以根据用户ID聚集数据，只需要从磁盘读取少量的数据页就可以读取用户的全部邮件。如果没有使用聚蔟，则每封邮件都要一次磁盘IO。
2. 数据访问更快。聚蔟索引把索引和数据放在同一个B-Tree中，因此通常更快。
3. 使用覆盖索引扫描可以直接使用页节点的主键值。

缺点：
1 插入速度依赖插入顺序
2 插入或者更新数据，可能有 “页分裂”问题。
3 聚蔟缩影可能导致全表扫描变慢。

